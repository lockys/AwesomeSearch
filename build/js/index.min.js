$(document).ready(function(){function e(e,a){var t=e.split("/")[3],n=e.split("/")[4],o="https://api.github.com/repos/"+t+"/"+n+"/readme";$.ajax({url:o,headers:{accept:"application/vnd.github.v3.html"},success:a})}var a,t,n=!0,o=!1,r={keys:["name"]},s=$(".awesome-block"),l=$(".search-result"),c=$(".mui-dropdown__menu"),i=$(".mui-dropdown"),h=function(h,m){var p;m=m||"null",t=[],o="awesome"===m?1:0,jsonURL=o?"https://raw.githubusercontent.com/lockys/awesome.json/master/awesome/awesome.json":"https://raw.githubusercontent.com/lockys/awesome.json/master/output/"+m+".json",i.removeClass("content-hidden"),l.addClass("content-hidden"),s.html("Please wait a moment, it won't take long."),$.getJSON(jsonURL,function(i){var d,u="awesome";if(p=i,n="awesome"!==m&&!0,s.html(""),l.html(""),$(".alert").html(""),c.html(""),o)$(".search-holder").html("Search the awesome world."),$(".cate").html(u),Object.keys(p).forEach(function(e){var a=e.replace(/\W/g,"").toLowerCase(),n='<h2 id="'+a+'">'+e+"</h2>";t=t.concat(p[e]),c.append('<li><a href="#'+a+'">'+e+"</a></li>"),s.append(n),p[e].forEach(function(e){var a=e.name.replace(/\W/g,"").toLowerCase(),t="",n="",r=e.description?" - "+e.description:"";o||(t=' href="'+e.url+'" '),n='<a class="mui-btn mui-btn--small mui-btn--primary '+a+'"'+t+'href="#repos/'+a+'" data-url="'+e.url+'" data-name="'+e.name+'"><span class="mui--text-white" data-url="'+e.url+'" data-name="'+e.name+'">'+e.name+'</span><span style="color: #7CF1F7" class="" data-url="'+e.url+'" data-name="'+e.name+'">'+r+"</span></a>",s.append(n)})}),s.removeClass("content-hidden awesome-background"),$(".back-button").addClass("content-hidden");else{var f=h.url;if(u=h.name,$(".cate").html(u),d='<a href="'+f+'" target="_blank">Go To Original Repo</a><br/><br/>',s.html("Retrieving repo..."),e(f,function(e){s.html("").append(d).append(e);for(var a,t=$("h6 a, h5 a, h4 a, h3 a, h2 a, h1 a"),n=f.split("/")[3],o=f.split("/")[4],r="https://github.com/"+n+"/"+o+"/blob/master/",l="style=",i=$("img"),h=0,m=i.length;m>h;++h){var p=$(i[h])[0].src;$(i[h]).attr("src",p.replace(window.location.href,r))}for(var h=0,m=t.length;m>h;++h)t[h].id=t[h].id.replace("user-content-",""),l="style=",t[h].id&&(a=$(t[h]).parent()[0].nodeName,"H1"===a?l+='"font-size: 18px;"':"H2"===a?l+='"font-size: 16px; color:#3C3C3C;"':"H3"===a?l+='"font-size: 14px; color:#7B7B7B;"':"H4"===a?l+='"font-size: 12px; color:#ADADAD;"':"H5"===a?l+='"font-size: 12px; color:#D9006C;"':"H6"===a&&(l+='"font-size: 12px; color:#EA0000;"'),c.append("<li><a "+l+' href="#'+t[h].id+'">'+$(t[h]).parent("h6, h5, h4, h3, h2, h1").text()+"</a></li>"))}),s.addClass("awesome-background").removeClass("content-hidden"),$(".back-button").removeClass("content-hidden"),0===Object.keys(p).length)return n=!1,void $(".alert").html('<span style="color: red;">This repo has not been parsed yet, so what you search is awesome repo</span><br/>');p.forEach(function(e){t=t.concat(e)})}a=new Fuse(t,r)})};$(".awesome-input").on("input",function(e){var t=$(this).val(),r=10;l.removeClass("content-hidden"),l.html(""),t||l.addClass("content-hidden");var s=a.search(t),c="";s.length||l.html("No result :(");for(var i=0,h=r;h>i;++i)if(s[i]){var m=s[i].name.replace(/\W/g,"").toLowerCase(),p=' href="'+s[i].url+'" ';o&&(p=""),c=s[i].description?" - "+s[i].description+"</br>":"<br/>",n?l.append('<a class="'+m+' search-repo-link"'+p+'data-url="'+s[i].url+'" data-name="'+s[i].name+'" target="_blank">'+s[i].name+"</a>"+c):l.append('<a class="'+m+' search-repo-link" data-url="'+s[i].url+'" data-name="'+s[i].name+'" href="#/repos/'+m+'">'+s[i].name+"</a>"+c)}}),$("body").click(function(e){$(e.target).is(".back-button")&&(e.preventDefault(),window.location.hash="/",h(null,"awesome"))}),$(".to-top-arrow").click(function(){return $("html, body").animate({scrollTop:0},600),!1});var m=Backbone.Router.extend({routes:{"repos/:cate":"getRepos"}}),p=new m;p.on("route:getRepos",function(e){function a(a){for(var n=Object.keys(a),o=0,r=n.length;r>o;++o)if(n[o].replace(/\W/g,"").toLowerCase()===e){t={name:n[o],url:a[n[o]]},$(".search-holder").html("Search the "+t.name),h(t,e);break}}var t={},n="https://raw.githubusercontent.com/lockys/awesome.json/master/name-map/awesome.json";$(".awesome-input").val(""),$.getJSON(n,a)}),Backbone.history.start(),h(null,"awesome")});