$(document).ready(function(){function e(e,a){var t=e.split("/")[3],n=e.split("/")[4],r="https://api.github.com/repos/"+t+"/"+n+"/readme";$.ajax({url:r,headers:{accept:"application/vnd.github.v3.html"},success:a})}var a,t,n=!0,r=!1,o=!1,s={keys:["name","description","cate"]},c=$(".awesome-block"),l=$(".search-result"),i=$(".mui-dropdown__menu"),m=$(".mui-dropdown"),u=function(u,d){var p;d=d||"null",t=[],o="awesome"===d?1:0,c.addClass("content-hidden"),m.removeClass("content-hidden"),$.getJSON("https://raw.githubusercontent.com/lockys/awesome.json/master/output/"+d+".json",function(m){var h,f="awesome";if(p=m,n="awesome"!==d&&!0,c.html(""),l.html(""),$(".alert").html(""),i.html(""),o)Object.keys(p).forEach(function(e){var a=e.replace(/\W/g,"").toLowerCase(),n='<h2 id="'+a+'">'+e+"</h2>";t=t.concat(p[e]),$(".cate").html(f),i.append('<li><a href="#'+a+'">'+e+"</a></li>"),c.append(n),p[e].forEach(function(e){var a=e.name.replace(/\W/g,"").toLowerCase(),t="",n="",r=e.description?" - "+e.description:"";o||(t=' href="'+e.url+'" '),n='<a class="mui-btn mui-btn--small mui-btn--primary '+a+'"'+t+'href="#repos/'+a+'" data-url="'+e.url+'" data-name="'+e.name+'"><span class="mui--text-white" data-url="'+e.url+'" data-name="'+e.name+'">'+e.name+'</span><span style="color: #7CF1F7" class="" data-url="'+e.url+'" data-name="'+e.name+'">'+r+"</span></a>",c.append(n)})}),c.removeClass("content-hidden awesome-background");else{var b=u.url;if(f=u.name,$(".cate").html(f),h='<a class="back-button"><- Back to Awesome</a><br/><a href="'+b+'" target="_blank">-> Original Repo</a>',c.html("Retrieving repo..."),e(b,function(e){c.html("").append(h).append(e);for(var a=$("h3 a, h2 a, h1 a"),t=0,n=a.length;n>t;++t)a[t].id=a[t].id.replace("user-content-",""),a[t].id&&i.append('<li><a href="#'+a[t].id+'">'+$(a[t]).parent("h2, h3, h1").text()+"</a></li>")}),c.addClass("awesome-background").removeClass("content-hidden"),0===Object.keys(p).length)return n=!1,void $(".alert").html('<span style="color: red;">This repo has not been parsed yet, so what you search is awesome repo</span><br/>');Object.keys(p).forEach(function(e){t=t.concat(p[e])})}a=new Fuse(t,s),r=!1})};$(".awesome-input").on("input",function(e){var t=$(this).val();c.addClass("content-hidden"),l.html(""),t||c.removeClass("content-hidden");for(var r=a.search(t),s="",i=0,m=r.length;m>i;++i)if(r[i]){var d=r[i].name.replace(/\W/g,"").toLowerCase(),p=' href="'+r[i].url+'" ';o&&(p=""),s=r[i].description?" - "+r[i].description+"</br>":"<br/>",n?(l.append('<a class="'+d+' search-repo-link"'+p+'data-url="'+r[i].url+'" data-name="'+r[i].name+'" target="_blank">'+r[i].name+"</a>"+s),function(e){$("."+e).off("click",function(a){var t={name:$(a.target).data("name"),url:$(a.target).data("url")};u(t,e)})}(d)):(l.append('<span class="'+d+' search-repo-link"'+p+'data-url="'+r[i].url+'" data-name="'+r[i].name+'">'+r[i].name+"</span>"+s),function(e){$("."+e).on("click",function(a){var t={name:$(a.target).data("name"),url:$(a.target).data("url")};u(t,e)})}(d))}}),c.click(function(e){$(e.target).is(".back-button")&&(e.preventDefault(),u(null,"awesome"))}),$(".to-top-arrow").click(function(){return $("html, body").animate({scrollTop:0},600),!1});var d=Backbone.Router.extend({routes:{"repos/:cate":"getRepos"}}),p=new d;p.on("route:getRepos",function(e){function a(a){$.getJSON(r,function(n){t={name:a.backword[e],url:n[a.backword[e]]},u(t,e)})}var t={},n="https://raw.githubusercontent.com/lockys/awesome.json/master/name-map/name-map.json",r="https://raw.githubusercontent.com/lockys/awesome.json/master/name-map/awesome.json";$.getJSON(n,a)}),Backbone.history.start(),u(null,"awesome")});